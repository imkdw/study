## 데이터베이스 모니터링
- PG는 Top-Down 방식의 모니터링 적용이 어려운데 이는 세션 레벨에서 제공되는 성능 데이터가 충분하지 않아서이다
- 아직은 세션 단위의 성능 지표를 제공하지 않지만 DB 전체 일량 확인은 가능하므로 다양한 정보 확인이 가능하다

<br>

## pg_stat_database 뷰를 활용한 성능 모니터링
- `pg_stat_database` 뷰는 디비 레벨의 성능 정보를 제공하는 뷰다
- 모니터링 관점에서는 누적값 보다는 모니터링 주기 내에 증가향 양(델타값)과 이를 초 단위로 환산한 초당 처리량이 더 의미있다
- 자체 모니터링 시스템을 구축할 때는 이러한 델타 값과 초당 값을 이용하는게 좋다

<br>

### `pg_stat_database` 뷰
- numbackends: 현재 디비에 접속 중인 백엔드 프로세스 개수
- xact_commit : 커밋 횟수
  - 커밋은 트랜잭션 보장을 위한 필우요소지만 지나치게 빈번한 커밋은 성능에 악영향을 줄 수 있다
- blks_read : 디스크 읽기 블록 수
  - 일반적으로 인덱스가 없는 테이블을 풀 스캔하는 경우 해당 수치가 급격하게 증가함
- blks_hit : 공유 버퍼에서 읽은 블록 수
  - 해당 수치가 비정상적으로 높아지는 경우는 비효율적인 쿼리가 수행되고 있을 가능성이 높음
- active_time : 쿼리 수행 시간
- stats_reset : `pg_stat_reset`에 의해서 초기화된 시간을 나타냄
