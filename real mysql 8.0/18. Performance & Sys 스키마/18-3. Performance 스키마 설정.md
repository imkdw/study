# Performance 스키마 설정

- 5.6.6 버전부터는 별도로 활성화하지 않아도 자동으로 활성화 되어있다
- 명시적으로 제어하고 싶다면 `my.cnf` 내부에 `performance_schema = ON | OFF` 설정을 해주어야 함

<br>

# 메모리 사용량 설정

- 모든게 메모리에 저장되므로 저장되는 데이터 양은 Performance 스키마의 메모리 사용량과 직결된다

<br>

# 데이터 수집 및 저장 설정

- 생선자-소비자 방식으로 구현되어서 내부적으로 데이터를 수집, 저장하는 부분으로 나눠서 동작한다
- 수집 부분과 관련해서 모니터링 대상과 수집 대상 이벤트 설정이 가능하다
- 또한 얼마나 상세하게 저장할것인지에 대해서 레벨 지정도 가능하다

<br>

### 런타임 설정 적용

- 런타임 설정 적용은 Performance 스키마에 존재하는 설정 테이블을 통해서 이뤄진다
- `setup_` 접두사로 시작하는 테이블들이 설정 테이블이다

<br>

### 저장 레벨 설정

- 데이터를 수집하고 저장하는 데 가장 큰 영향을 미치는 설정을 저장 레벨 설정이다
- 제벨이 아예 설정돼지 않으면 수집 대상에 포함되도 아무런 데이터가 저장되지 않는다
- 상위 레벨이 비활성화 되어있다면 하위 레벨이 활성되도 하위 레벨 설정은 적용되지 않는다

<br>

### 수집 대상 이벤트 설정

- `setup_instruments` 테이블에 저장되는 수집 대상 이벤트 목록을 설정할 수 있다
- Performance 스키마는 해당 테이블에 등록된 클래스의 인스턴스들로부터 데이터를 수집할 수 있다

<br>

### 모니터링 대상 설정

- `setup_instruments` 테이블에 설정된 수집 대상 이벤트들의 데이터를 모두 수집하는건 아니다
- 모니터링하는 대상들과의 관련 여부를 확인해서 관련이 있는 경우 모니터링 대상들에 설정된 내용을 고려해서 이벤트 데이터를 수집한다
- `setup_objects`, `setup_threads`, `setup_actors` 테이블을 통해서 모니터링할 대상을 설정할 수 있다

<br>

### Performance 스키마 설정의 영구 적용

- 세션에서 설정한 내용은 재시작되면 모두 초기화된다
- `my.cnf` 같은 설정 파일에 기록해야 영구적으로 적용이 가능하다
