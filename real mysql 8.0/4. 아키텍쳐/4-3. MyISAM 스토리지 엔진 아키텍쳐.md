# 키 캐시

- InnoDB의 버퍼 풀과 비슷한 역할을 담당함
- 오직 인덱스만을 대상으로 작동하고, 쓰기 작업에 대해서만 부분적으로 버퍼링함

<br/>

# 운영체제의 캐시 및 버퍼

- MyISAM 인덱스는 키 캐시를 이용해서 디스크를 검색하지 않고도 빠른 검색이 가능함
- 하지만 테이블의 데이터에 대해서는 디스크 I/O 해결이 불가능함, 항상 OS 레벨의 I/O로 이어짐
- 보통 키 캐시의 최대 공간은 OS의 메모리의 40% 정도로 지정하는걸 권장함

<br/>

# 데이터 파일과 기본키 인덱스 구조

- InnoDB와 다르게 단순하게 생성되는 순서로 쌓이며 데이터 파일이 힙 처럼 사용됨
- 테이블에 저장되는 모든 레코드는 모두 ROWID라는 물리적인 주소값을 가짐
  - 기본키와 세컨더리 인덱스는 모두 데이터 파일에 저장된 레코드의 ROWID 값을 포인터로 가짐

<br/>

### 고정길이 ROWID

- 테이블 생성시 최대 레코드 수를 지정하는 MAX_ROWS 옵션을 사용하는 경우 사용된다
- 4바이트의 정수를 가지고 데이터가 추가된 순번이 ROWID로 사용된다

<br/>

### 가변길이 ROWID

- 별도의 MAX_ROWS를 설정하지 않으면 `myisam_data_pointer_size`에 할당된 바이트 수 만큼 공간을 사용함
- 기본값은 7로 2~7바이트 사이의 값을 사용하게됨
