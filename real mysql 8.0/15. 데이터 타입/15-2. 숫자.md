# 숫자

### 참값, 근삿값

- 정확도에 따라서 크게 참값, 근삿값 타입으로 구분함
- 참값
  - 정확히 그 값을 그대로 유지하는걸 의미함
  - integer를 포함한 int로 끝나는 타입과 demical이 있음
- 근삿값
  - 흔히 부동소수점이라고 불리는 값
  - 정확히 일치하는게 아닌 비슷한 값으로 관리하는걸 의미
  - float, double이 이에 속함

<br>

### 십진(DEMICAL) 표기법과 이진(BINARY) 표기법

- 이진 표기법
  - 흔하게 프로그래밍 언어에서 사용하는 정수나 실수 타입
  - 한 바이트로 256까지의 숫자(양수만)를 저장할 수 있어서 메모리나 디스크 공간 절약이 가능함
  - integer, bigint 등 대부분 숫자 타입은 이진 표기법을 사용함
- 십진 표기법
  - 각 자릿값을 표현하기 위해 4비트나 한 바이트를 사용하는 방법
  - 흔히 얘기하는 진수가 아니라 디스크나 메모리에 십진 표기법으로 저장되는걸 의미함
  - demical이 이헤 속하며 돈처럼 정확하게 관리해야 하는 값을 저장할 때 사용함
  - 65자리까지 표현할 수 있으므로 bigint로도 저장할 수 없는 값을 저장할 때 사용함

<br>

### 주로 뭘 사용할까

- demical의 경우 이진 표기법을 사용하는 타입보다 저장 공간을 2배 이상으로 필요로함
- 매우 큰 숫자나 고정 소수점 저장이 필요한 경우가 아니라면 일반적으로 integer, bigint를 주로 사용함

<br>

# 정수

- 다양한 타입이 존재하지만 값의 범위만 다를뿐 큰 차이는 없다
- 입력이 가능한 수의 범위 내에서 최대한 저장 공간을 적게 사용하는 타입을 사용하면 된다

<br>

### SIGNED, UNSIGNED

- unsigned가 설정된 정수 컬럼은 양수만 저장할 수 있게 되면서 최대값이 signed보다 2배 늘어남
- 인덱스 관련되서 영향은 딱히 없고 서로 저장되는 값의 범위가 다르니까 외래키나 조인조건은 타입을 일치시키는게 좋음

<br>

# 부동 소수점

- 부동 소수점을 저장하기 위해서는 `float`, `double을` 주로 사용함
- 정확한 유효 소수점 값을 식별하기 어려워서 크다 작다 비교를 하기가 쉽지 않음
- 또한 동등비교를 지원하지 않음
- float는 4바이트로 유효 자릿수는 8, double은 8바이트로 유효 자릿수는 16이다
- 바이너리 로그 포맷이 statement인 경우는 복세에서 소스와 레플리카간 데이터 불일치가 발생할 수 있음
  - 만약 저장이 필요하다면 유효 소수점의 `자릿수 * 10`을 정수로 만들고 저장하는 방법도 있음
  - 다시 해당 값을 사용하는 프로시저나 어플리케이션에서는 `자릿수 * 10`으로 나눈 결과를 사용하면됨

<br>

# DEMICAL

- 소수점의 위치가 가변적이지 않은 고정 소수점 타입을 위해서 사용함
- 숫자 하나를 ㅈ장하는데 1/2 바이트가 필요해서 3~4자리 저장시는 2바이트가 필요함
- 소수가 아닌 정수를 관리하기 위해서 DEMICAL을 사용하는건 성능, 공간상 별로 좋지 않음

<br>

# 정수 타입 컬럼 생성시 주의점

- 부동소수점이나 demical을 사용하는 경우는 정밀도를 표시하는게 일반적임
  - `demical(20, 5)`
    - 정수부는 `20 - 5 = 15`만큼으로 설정하고 소수부를 5자리까지 저장 가능한 컬럼
  - `demical(20)`
    - 소수부 없이 정수부만 20자리까지 저장 가능한 컬럼
- float, double은 저장 공간의 크기가 고정적이라 정밀도를 조정한다고 해서 저장공간 크기가 바뀌지 않음
- demical은 저장 공간의 크기가 가변적이라 정밀도는 저장 가능한 자릿수를 결정하고 저장 공간 크기까지 제한함
- 고정형 데이터 타입에 int(10) 처럼 뒤에 붙는 숫자는 자리수 제한이 아닌 화면에 표시할 자리수일 뿐임

<br>

# 자동 증가(AUTO INCREMENT)옵션 사용

- 해당 옵션을 사용하는 컬럼은 반드시 기본키나 유니크 키의 일부로 설정해야함
- 해당 제약은 InnoDB 엔진에서만 적용됨
- AUTO_INCREMENT를 사용하는 컬럼은 테이블당 하나만 사용이 가능함
- 개발용 서버에서 운영용 서버로 스키마를 복제한다면 CREATE TABLE에 마지막 증가값이 기재되므로 초기값에 주의하자
