# DEEPL API 사용하기
```python
import os
from langchain_teddynote.translate import Translator

deepl_api_key = os.getenv("DEEPL_API_KEY")
translator = Translator(deepl_api_key, "EN", "KO")
translated_text = translator("hello, nice to meet you")

# 안녕하세요, 만나서 반가워요
print(translated_text)
```

<br>

# 테스트 데이터셋 번역하기
```python
import os
from langchain_teddynote.translate import Translator
from tqdm import tqdm
import pandas as pd
from datasets import Dataset
import ast


def convert_to_list(example):
    contexts = ast.literal_eval(example["contexts"])
    return {"contexts": contexts}


deepl_api_key = os.getenv("DEEPL_API_KEY")
translator = Translator(deepl_api_key, "EN", "KO")
translated_text = translator("hello, nice to meet you")

df = pd.read_csv(
    "/Users/imkdw/study/RAG 비법노트/22. RAG 평가와 개선/ragas_synthetic_dataset.csv"
)

test_dataset = Dataset.from_pandas(df)
test_dataset = test_dataset.map(convert_to_list)


for i, row in tqdm(df.iterrows(), total=len(df), desc="번역 진행 중"):
    df.loc[i, "question_translated"] = translator(row["question"])
    df.loc[i, "ground_truth_translated"] = translator(row["ground_truth"])

# 0  What is the purpose of Cohere's Data Provenanc...  ['∙ 또한 크라우드소싱 플랫폼이 할당한 라이선스는 데이터셋 원저작자의 의도보다 더...  ...                   Cohere의 데이터 출처 탐색기의 목적은 무엇인가요?  Cohere의 데이터 출처 탐색기의 목적은 데이터 투명성 위기를 해결하기 위한 것입니다.
# 1  What measures are suggested to ensure data pri...  ['£유튜브, 특정인을 모방한 AI 생성 콘텐츠에 대한 삭제 요청에도 대응 계획\n...  ...         AI 개발에서 데이터 프라이버시를 보장하기 위해 어떤 조치가 제안되나요?                         주어진 질문에 대한 답변이 컨텍스트에 없습니다.
# 2  What recent announcement involving OpenAI was ...  ['중점 지원할 예정\n∙ 포럼에 따르면 AI 레드팀에 대한 자금 지원은 AI 모델...  ...  최근 AI 안전 및 자금 지원과 관련하여 OpenAI와 관련된 어떤 발표가 있었나요?  구글, 앤트로픽, 구글, 마이크로소프트, 오픈AI는 2023년 10월 25일 프론티...
# 3  What links AI compliance, the EU AI Act, and i...  ['SPRi AI Brief |\n2023-12월호\nEU AI 법 3자 협상, 기...  ...   AI 규정 준수와 EU AI 법, 그리고 회원국에 미치는 영향은 어떻게 연결되나요?  이 문맥에서는 EU AI 법과 AI 규정 준수에 대한 의미를 설명하며, 이 법이 회...
# 4  What 2024 AI events link tech, skills, and eco...  ['머신러닝(+40%), 텐서플로우(+38%), 딥러닝(+27%), 자연어처리(+1...  ...  기술, 기술, 경제적 가치를 연결하는 2024년 AI 이벤트에는 어떤 것이 있을까요?  기술, 기술, 경제적 가치를 연결하는 2024년 AI 행사로는 CES 2024, A...
print(df.head())

df.drop(columns=["question", "ground_truth"], inplace=True)
df.rename(
    columns={
        "question_translated": "question",
        "ground_truth_translated": "ground_truth",
    },
    inplace=True,
)

#                                             contexts evolution_type                                           metadata  episode_done                                         question                                       ground_truth
# 0  ['∙ 또한 크라우드소싱 플랫폼이 할당한 라이선스는 데이터셋 원저작자의 의도보다 더...         simple  [{'source': '/Users/imkdw/study/RAG 비법노트/22. R...          True                   Cohere의 데이터 출처 탐색기의 목적은 무엇인가요?  Cohere의 데이터 출처 탐색기의 목적은 데이터 투명성 위기를 해결하기 위한 것입니다.
# 1  ['£유튜브, 특정인을 모방한 AI 생성 콘텐츠에 대한 삭제 요청에도 대응 계획\n...         simple  [{'source': '/Users/imkdw/study/RAG 비법노트/22. R...          True         AI 개발에서 데이터 프라이버시를 보장하기 위해 어떤 조치가 제안되나요?                         주어진 질문에 대한 답변이 컨텍스트에 없습니다.
# 2  ['중점 지원할 예정\n∙ 포럼에 따르면 AI 레드팀에 대한 자금 지원은 AI 모델...         simple  [{'source': '/Users/imkdw/study/RAG 비법노트/22. R...          True  최근 AI 안전 및 자금 지원과 관련하여 OpenAI와 관련된 어떤 발표가 있었나요?  구글, 앤트로픽, 구글, 마이크로소프트, 오픈AI는 2023년 10월 25일 프론티...
# 3  ['SPRi AI Brief |\n2023-12월호\nEU AI 법 3자 협상, 기...      reasoning  [{'source': '/Users/imkdw/study/RAG 비법노트/22. R...          True   AI 규정 준수와 EU AI 법, 그리고 회원국에 미치는 영향은 어떻게 연결되나요?  이 문맥에서는 EU AI 법과 AI 규정 준수에 대한 의미를 설명하며, 이 법이 회...
# 4  ['머신러닝(+40%), 텐서플로우(+38%), 딥러닝(+27%), 자연어처리(+1...      reasoning  [{'source': '/Users/imkdw/study/RAG 비법노트/22. R...          True  기술, 기술, 경제적 가치를 연결하는 2024년 AI 이벤트에는 어떤 것이 있을까요?  기술, 기술, 경제적 가치를 연결하는 2024년 AI 행사로는 CES 2024, A...
print(df.head())

df.to_csv(
    "/Users/imkdw/study/RAG 비법노트/22. RAG 평가와 개선/ragas_synthetic_dataset_translated.csv",
    index=False,
)
```

<br>

# 데이터프레임을 허깅페이스에 업로드하기
```python
import os
from langchain_teddynote.translate import Translator
from tqdm import tqdm
import pandas as pd
from datasets import Dataset
import ast
from datasets import Dataset
import os


def convert_to_list(example):
    contexts = ast.literal_eval(example["contexts"])
    return {"contexts": contexts}


deepl_api_key = os.getenv("DEEPL_API_KEY")
translator = Translator(deepl_api_key, "EN", "KO")
translated_text = translator("hello, nice to meet you")

df = pd.read_csv(
    "/Users/imkdw/study/RAG 비법노트/22. RAG 평가와 개선/ragas_synthetic_dataset_translated.csv"
)

# pandas DataFrame을 Hugging Face Dataset으로 변환
dataset = Dataset.from_pandas(df)

dataset_name = "IMKDW/ragas-test-dataset"

# https://huggingface.co/datasets/IMKDW/ragas-test-dataset
dataset.push_to_hub(
    dataset_name,
    private=True,
    split="korean_v1",
    token=os.getenv("HUGGINGFACEHUB_API_TOKEN"),
)
```