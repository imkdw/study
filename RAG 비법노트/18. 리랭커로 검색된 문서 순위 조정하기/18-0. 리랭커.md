# 리랭커
- RAG 시스템에서 핵심적인 역할을 하는 모듈
- 리트리버가 찾아낸 문서들의 순위를 재조정해서 대규모 데이터셋에서도 보다 정확하고 관련성 높은 정보 추출을 하도록 돕는것
- 리트리버가 반환한 후보 문서들을 더욱 정밀하게 재평가해서 순위를 다시 매기고 이 중 상위 문서들만 선택해서 LLM에 입력으로 제공함

<br>

# 인코더
### 리트리버는 `바이인코더`를 사용함
- 바이인코더는 각각의 문서를 벡터 형식으로 개별적으로 변환한 다음에 데이터베이스에 적재해둠
- 나중에 질문이 들어오면 그 문서 간 유사도 계산을 진행함
- 이러한 방식은 문서를 미리 벡터로 바꿔 저장이 가능해서 검색 속도가 빠르다는 장점이 존재함
- 연산 비용이 낮고 속도가 빠르지만 정확도가 떨어질 수 있음

<br>

### 리랭커는 `교차인코더`를 사용함
- 질문이 들어오면 질문과 문서를 한 쌍으로 묶어 함께 인코더에 입력하고 이를 바탕으로 유사도를 계산함
- 질문과 문서를 동시에 처리하면 두 텍스트 사이 의미 관계를 문맥 속에서 정밀하게 파악이 가능해서 더 높은 정확도를 얻을 수 있음
- 이후에 추가적인 `완전 연결 층`을 통해서 최종 유사도 점수가 계산됨
- BERT와 같은 복잡한 언어 모델을 통해서 질문과 문서를 함께 인코딩하는데 이러한 특성으로 인해 계산 비용이 높고 처리 속도가 느림
- 대규모 디비에서 직접 리랭커를 사용하는것은 비효율적일수도 있음

<br>

### 일반적인 방법
- 먼저 리트리버를 사용해서 상위 5~10개 정도의 문서를 빠르게 추출함
- 이러한 문서를 리랭커에 입력해서 최종적으로 정확한 결과를 얻는 방식이 효율적임