# iter 함수로 단계별 출력하고 확인
- `iter()` 함수는 에이전트의 실행 과정을 한 단계씩 진행하도록 도와줌
- 중간 과정에서 실행 결과를 세부적으로 확인이 가능함
- AI가 모든 작업을 수행하는게 아닌 사람이 AI의 판단을 검토해서 수정이 가능한데 이를 `Human-in-the-loop` 라고 부름


```python
from langchain.agents import tool


@tool
def add_function(a: float, b: float) -> float:
    """Adds two numbers together."""
    return a + b


from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder
from langchain_openai import ChatOpenAI
from langchain.agents import create_tool_calling_agent, AgentExecutor

tools = [add_function]

gpt = ChatOpenAI(model="gpt-4o-mini")

prompt = ChatPromptTemplate.from_messages(
    [
        (
            "system",
            "You are a helpful assistant.",
        ),
        ("human", "{input}"),
        MessagesPlaceholder(variable_name="agent_scratchpad"),
    ]
)

gpt_agent = create_tool_calling_agent(gpt, tools, prompt)

agent_executor = AgentExecutor(
    agent=gpt_agent,
    tools=tools,
    verbose=False,
    max_iterations=10,
    handle_parsing_errors=True,
)

question = "114.5 + 121.2 + 34.2 + 110.1 의 계산 결과는?"

for step in agent_executor.iter({"input": question}):
    if output := step.get("intermediate_step"):
        action, value = output[0]
        if action.tool == "add_function":
            print(f"\nTool Name: {action.tool}, 실행 결과: {value}")
        # Tool Name: add_function, 실행 결과: 235.7
        # 계속 진행하시겠습니다? (y/n)?:
        #  y

        # Tool Name: add_function, 실행 결과: 380.0
        # 계속 진행하시겠습니다? (y/n)?:
        # y
        _continue = input("계속 진행하시겠습니다? (y/n)?:\n") or "Y"
        if _continue.lower() != "y":
            break


# 114.5 + 121.2 + 34.2 + 110.1의 계산 결과는 380.0입니다.
if "output" in step:
    print(step["output"])
```