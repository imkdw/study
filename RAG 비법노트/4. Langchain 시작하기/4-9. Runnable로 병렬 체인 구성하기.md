# Runnable로 병렬 체인 구성하기
- 여러 Runnable 체인을 병렬적으로 동시에 실행하는것을 RunnableParallel 클래스를 사용해서 구현할 수 있음
- prompt, model, StrOutputParser 등을 연결한 chain 자체도 Runnable임

```python
from dotenv import load_dotenv
from langchain_core.runnables import RunnableParallel, RunnablePassthrough
from langchain_teddynote import logging
from langchain_openai import ChatOpenAI
from langchain_core.prompts import PromptTemplate
from langchain_core.output_parsers import StrOutputParser


load_dotenv()

logging.langsmith("langchain_test")

model = ChatOpenAI(model="gpt-4o-mini")

prompt = PromptTemplate.from_template("{topic}에 대해서 3문장으로 설명해줘")


chain1 = (
    {"country": RunnablePassthrough()}
    | PromptTemplate.from_template("{country} 의 수도는?")
    | ChatOpenAI()
    | StrOutputParser()
)
chain2 = (
    {"country": RunnablePassthrough()}
    | PromptTemplate.from_template("{country} 의 면적은?")
    | ChatOpenAI()
    | StrOutputParser()
)

combined_chain = RunnableParallel(capital=chain1, area=chain2)

response = combined_chain.batch([{"country": "대한민국"}, {"country": "미국"}])

# [
#     {
#         'capital': '서울입니다.',
#         'area': '대한민국의 면적은 약 100,363.4 제곱 킬로미터 입니다.'
#     },
#     {
#         'capital': '와싱턴 D.C. (Washington D.C.)',
#         'area': '미국의 면적은 9,826,675 km² 입니다.'
#     }
# ]
print(response)
```