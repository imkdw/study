# 멀티모달
- 텍스트뿐만 아니라 이밎, 음성 등 다양한 형태의 데이터를 입력이나 출력으로 처리하는 기술
- 시스템 프롬프트, 사용자 프롬프트도 같이 넣을 수 있음

<br>

# 예제
```python
from langchain_openai import ChatOpenAI
from dotenv import load_dotenv
from langchain_teddynote.models import MultiModal
from langchain_teddynote.messages import stream_response
import os

load_dotenv()

# 현재 스크립트의 디렉토리 경로 가져오기
current_dir = os.path.dirname(os.path.abspath(__file__))


# 객체 생성
llm = ChatOpenAI(
    temperature=0.1,
    model_name="gpt-4.1-nano",
)

# 멀티모달 객체 생성
multimodal_llm = MultiModal(llm)


def process_image(image):
    answer = multimodal_llm.stream(image)
    stream_response(answer)


# 웹사이트에 있는 이미지
IMAGE_URL = "https://t3.ftcdn.net/jpg/03/77/33/96/360_F_377339633_Rtv9I77sSmSNcev8bEcnVxTHrXB4nRJ5.jpg"

# 로컬PC 에 저장되어 있는 이미지 (절대 경로로 수정)
IMAGE_PATH_FROM_FILE = os.path.join(current_dir, "20250602_141756.jpg")

"""
The image displays a table titled "TABLE 001: LOREM IPSUM DOLOR AMIS ENIMA ACCUMER TUNA," which appears to be a sample or placeholder table, possibly used for layout or formatting purposes. The table contains data across several columns and rows, with some columns labeled in Latin-like placeholder text and others in English.

**Column Headers:**
- The first column is unlabeled but contains various text entries.
- The second column is labeled "Loremism."
- The third column is labeled "Amis terim."
- The fourth column is labeled "Gato lepis."
- The fifth column is labeled "Totores."

**Rows and Data:**
1. **Row 1:**
   - "Lorem dolor siamet"
   - 8,288
   - 123%
   - YES
   - $89
"""
# process_image(IMAGE_URL)


"""
The image depicts a typical workspace setup with several notable elements:

1. **Keyboard**: The most prominent feature is a custom-designed keyboard with a unique layout. The keys are labeled with standard functions, but some keys are marked with additional labels or designs, such as "SPACE" in red on the spacebar, and some keys have decorative markings or patterns. The keyboard appears to be a mechanical or specialized keyboard, possibly customized for ergonomic or aesthetic reasons.

2. **Mouse**: To the right of the keyboard, there is a black gaming mouse with a sleek design and illuminated accents, indicating it might be a gaming or high-performance mouse.

3. **Desk Items**:
   - A small container of what appears to be lip balm or a similar cosmetic product is placed on the desk.
   - A coiled, light-green cable or cord is connected to the desk, possibly for charging or connecting devices.
   - A small black device, possibly a USB hub or external hard drive, is also on the desk.

4. **Shelf and Items on Top**:
   - The white shelf above the desk holds several books, mostly in Korean, related to programming, software development, and artificial intelligence.
   - A small, plush toy resembling a hamster or mouse with a red nose is placed on the shelf, possibly for decoration or as a desk mascot.
   - There is a black rectangular object, possibly a power bank or external device, on the shelf.

5. **Cables and Power Strips**:
   - Multiple cables are visible, including a multi-port power strip with blue indicator lights, connected to various devices.
   - The cables are organized but visible, indicating a typical cluttered but functional workspace.

6. **Background and Environment**:
   - The background appears to be a typical office or workspace environment with a fabric-covered partition or wall.
   - The overall setup suggests a tech-savvy individual, possibly a programmer or developer, given the books and the customized keyboard.

This workspace is organized for productivity, with a focus on programming and computing, complemented by personal touches like the plush toy.
"""
process_image(IMAGE_PATH_FROM_FILE)
```

<br>

# 시스템 프롬프트와 사용자 프롬프트 지정하기
- 시스템 프롬프트는 전역 설정이 적용되므로 모델의 역할을 나타내는 페르소나를 지정함
- 사용자 프롬프트는 재무제표 정리나 해석처럼 구체적인 작업을 쓰는게 좋음

```python
from langchain_openai import ChatOpenAI
from dotenv import load_dotenv
from langchain_teddynote.models import MultiModal
from langchain_teddynote.messages import stream_response

load_dotenv()


# 객체 생성
llm = ChatOpenAI(
    temperature=0.1,
    model_name="gpt-4.1-nano",
)

system_prompt = """당신은 표(재무제표) 를 해석하는 금융 AI 어시스턴트 입니다. 
당신의 임무는 주어진 테이블 형식의 재무제표를 바탕으로 흥미로운 사실을 정리하여 친절하게 답변하는 것입니다."""

user_prompt = """당신에게 주어진 표는 회사의 재무제표 입니다. 흥미로운 사실을 정리하여 답변하세요."""

multimodal_llm_with_prompt = MultiModal(
    llm, system_prompt=system_prompt, user_prompt=user_prompt
)

IMAGE_PATH_FROM_FILE = "https://storage.googleapis.com/static.fastcampus.co.kr/prod/uploads/202212/080345-661/kwon-01.png"

answer = multimodal_llm_with_prompt.stream(IMAGE_PATH_FROM_FILE)


"""
이 재무제표에서 흥미로운 점은 다음과 같습니다:

1. **유동자산의 안정적 증가**: 2017년부터 2019년까지 유동자산이 꾸준히 증가하고 있습니다. 2017년 8,377,679백만원에서 2019년 8,349,633백만원으로 약간 감소했지만, 전체적으로는 높은 수준을 유지하고 있습니다.

2. **현금및현금성자산의 감소**: 현금및현금성자산은 2018년 1,690,862백만원에서 2019년 1,002,263백만원으로 크게 감소하였는데, 이는 현금 유출이 있었거나 투자/운영 비용이 증가했음을 시사합니다.

3. **매출채권의 안정적 유지**: 매출채권은 2017년 3,781,000백만원에서 2019년 3,981,935백만원으로 약간 증가했으며, 기업의 매출 회수 능력이 안정적임을 보여줍니다.

4. **비유동자산의 증가**: 비유동자산은 2017년 12,770,457백만원에서 2019년 18,677,453백만원으로 크게 증가하였으며, 이는 기업이 장기적 투자를 확대하거나 자산을 늘리고 있음을 의미합니다.

5. **재고자산의 증가**: 재고자산은 2017년 2,074,555백만원에서 2019년 2,670,294백만원으로 증가하여, 재고 관리 또는 생산량이 늘어나고 있음을 보여줍니다.

이 재무제표는 기업이 유동자산과 비유동자산 모두를 확장하며 성장하고 있음을 보여주며, 특히 장기적 투자가 활발히 이루어지고 있음을 알 수 있습니다.%     
"""
stream_response(answer)
```