# 리트리버
- 사용자의 질문과 가장 관련성 높은 정보를 벡터 디비에서 찾아 제공하는 단계
- 효율적인 리트리버 없이는 대규모 디비에서 관련 정보를 신속하고 정확하게 찾아내는게 매우 어려움

<br>

# 리트리버의 작동방식
- 리트리버는 사용자의 질문을 처리하기 위해서 먼저 질문을 벡터 형태로 변환함
- 이후에 저장된 문서랑 유사성을 비교하는데 주로 `코사인 유사성`이나 `MMR` 같은 수학적 방법이 주로 사용됨
- 선정된 문서들의 정보는 다음 단게인 프롬프트 생성으로 전달됨
- 꼭 필요한 정보는 반드시 검색 결과에 포함되고 불필요한 정보는 최소솨하는 검색 로직을 찾아나가야함

<br>

# 희소 리트리버와 밀집 리트리버
- 희소, 밀집 리트리버는 NLP 같은 대규모 문서 집합에서 관련 문서를 검색할 때 사용되는 두 가지 주요 방법임

<br>

### 희소 리트리버
- 문서와 질문을 이산적인 키워드 벡터로 변환해서 처리하는데 보통 전통적인 정보 검색 기법을 사용함
- 단어의 존재 여부만을 고려해서 계산 비용이 낮고 구현이 간단함
- 검색 결과의품질이 키워드의 선택에 크게 의존하게됨

<br>

#### 희소 리트리버 방식
- TF-IDF : 단어가 문서에 나타나는 빈도, 몇 개의 문서에서 나타나는지를 반영해서 단어의 중요도를 계산. 자주 나타나면서도 문서 집합 전체에서 드물게 나타나는 단어가 높은 가중치를 받음
- BM25 : TF-IDF 개선판으로 문서의 길이를 고려해서 검색 정확도를 향상시킴. 긴 문서, 짧은 문서 간 가중치를 조정해서 단어 빈도의 영향을 상대적으로 조절함

<br>

### 밀집 리트리버
- 최신 딥러닝 기법을 사용해서 문서와 쿼리를 연속적인 고차원 벡터로 인코딩함
- 문서의 의미적 내용을 보다 풍부하게 표현이 가능하고 키워드가 완벽히 일치하지 않아도 의미적으로 관련된 문서 검색이 가능함
- 언어의 뉘앙스와 문맥을 이해하는 데 유리하고, 복잡한 질문에 대해서 더 정확한 검색 결과를 제공할 수 있음