# LlamaParse
- 다양한 문서를 손쉽게 파싱하는 라이브러리
- 내부에는 멀티모달 처리 기능도 있는데 PDF 파일 내부에 사진이나 차트도 gpt-4o 같은 멀티모달 모델을 통해서 텍스트로 변환이 가능함

```python
from llama_parse import LlamaParse
from llama_index.core import SimpleDirectoryReader

parser = LlamaParse(
    result_type="markdown",  # markdown, text 가능
    num_workers=8,  # 워커
    verbose=True,
    language="ko",
)

file_extractor = {".pdf": parser}

documents = SimpleDirectoryReader(
    input_files=[
        "/Users/imkdw/study/RAG 비법노트/example/maplestory-black-magition-pattern.pdf"
    ],
    file_extractor=file_extractor,
).load_data()

# LlamaIndex는 langchain과 속성이 다른 경우가 있어서 랭체인 document 형식으로 변환함
docs = [doc.to_langchain_format() for doc in documents]

# # 1.2.3 페이즈에서 운석이 수직으로 떨어진다.

# 맵 기준으로 오른쪽 위에서부터 왼쪽으로, 또는 반대로 떨어지며, 인접한 운석 간에는 135px, 0.65초의 간격이 있다. 피격 시 50% 데미지를 입고 창조의 저주에 걸린다. 다크 사이트 상태로 회피할 수 있다. 재사용 대기시간 약 60초

# 유저들 사이에서는 보통 감자, 회오리 감자라고 부른다. 2페이즈에서 마지막 운석은 중간에 터지며, 3페이즈에서 생성된 발판에 닿아도 터진다.

# # 모닝 스타폴 (통칭 : 사선, 땅개)

# | 떨어지는 모습 | 지면에 떨어진 후 이동하는 모습 |
# | ------- | ----------------- |

# 2, 3페이즈에서 보라색 운석 5개가 왼쪽 아래 대각선 방향으로 떨어진다.[15] 피격 시 35% 데미지를 입고 창조의 저주에 걸린다. 다크 사이트로 회피할 수 있다.

# 지상에 낙하 후에는 지상에서 왼쪽이나 오른쪽 중 랜덤한 방향으로 이동하며, 맵 끝까지 이동하여 충돌한 뒤 사라진다. 피격 시 50% 데미지를 입고 창조의 저주에 걸린다. 다크 사이트로 회피할 수 없다.

# 유저들 사이에서는 보통 공중에서 떨어지는 운석을 사선, 지상에서 움직이는 운석을 땅개라고 부른다. 이 운석은 대체로 왼쪽에 집중적으로 떨어지기에 왼쪽에 있으면 피하기가 굉장히 어렵다.

# 낙하 후 상태에선 텔레포트나 윗점을 사용해서 피할 수 있으나 녹스피어, 검은 사슬 같은 파괴의 저주 패턴에 맞지 않도록 주의할 것. 특히 2페이즈에서 최악의 패턴 중 하나인데 스타폴과 사슬, 폴링, 녹스피어 등과 함께 쏟아지는 경우가 많기 때문에 저주가 중첩될 경우 데스 카운트가 순식간에 사라진다.

# # 2.2. 페이즈 1
print(docs[5].page_content)

# {
#     "file_path": "/Users/imkdw/study/RAG 비법노트/example/maplestory-black-magition-pattern.pdf",
#     "file_name": "maplestory-black-magition-pattern.pdf",
#     "file_type": "application/pdf",
#     "file_size": 21945513,
#     "creation_date": "2025-08-03",
#     "last_modified_date": "2025-08-03",
# }
print(docs[0].metadata)
```

<br>

# 멀티모달 모델로 파싱하기
```python
from llama_parse import LlamaParse
from llama_index.core import SimpleDirectoryReader
import os

parser = LlamaParse(
    result_type="markdown",  # markdown, text 가능
    num_workers=8,  # 워커
    verbose=True,
    language="ko",
)

file_extractor = {".pdf": parser}

documents = LlamaParse(
    use_vendor_multimodal_model=True,
    vendor_multimodal_model_name="openai-gpt4o",
    vendor_multimodal_api_key=os.environ["OPENAI_API_KEY"],
    result_type="markdown",
    language="ko",
)

parsed_docs = documents.load_data(file_path="/Users/imkdw/study/RAG 비법노트/example/maplestory-black-magition-pattern.pdf")


docs = [doc.to_langchain_format() for doc in parsed_docs]
```

<br>

### 인스트럭션 커스텀하기
```python
from llama_parse import LlamaParse
from llama_index.core import SimpleDirectoryReader
import os

parsing_instruction = (
    "You are parsing a brief of AI Report. Please extract tables in markdown format."
)

parser = LlamaParse(
    use_vendor_multimodal_model=True,
    vendor_multimodal_model_name="openai-gpt4o",
    vendor_multimodal_api_key=os.environ["OPENAI_API_KEY"],
    result_type="markdown",
    language="ko",
    parsing_instruction=parsing_instruction,
)

parsed_docs = parser.load_data(
    file_path="/Users/imkdw/study/RAG 비법노트/example/maplestory-black-magition-pattern.pdf"
)

docs = [doc.to_langchain_format() for doc in parsed_docs]
```