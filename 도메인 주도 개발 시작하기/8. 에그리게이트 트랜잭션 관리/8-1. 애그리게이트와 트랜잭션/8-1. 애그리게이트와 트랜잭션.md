# 애그리게이트와 트랜잭션

- 운영자와 고객이 동시에 배송지와 배송 상태를 변경한다고 가정
- 2개의 스레드는 각각 다른 정보를 디비에 저장하는데 만약 그런 경우는 애그리게이트의 일관성이 깨지게됨
- 일관성이 깨지는 문제 방지를 위해서는 다양한 방법이 존재함
  - 운영자가 배송지 정보를 조회하고 상태를 변경하는 동안, 고객이 수정하지 못하게 차단
  - 운영자가 배송지 정보를 조회한 이후에 고객이 정보를 변경하면, ㅇㄴ영자가 애그리게이트를 다시 조회한 뒤 수정하기

<br>

# 선점 잠금과 비선점 잠금

- DBMS가 지원하는 트랜잭션과 함께 애그리게이트를 위한 추가적인 트랜잭션 처리 기법이 필요함
- 이러한 기법에는 `선점 잠금` 과 `비선점 잠금`이 있음
