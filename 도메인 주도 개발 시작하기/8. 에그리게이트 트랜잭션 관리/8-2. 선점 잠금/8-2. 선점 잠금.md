# 선점 잠금

- 먼저 애그리게이트를 구한 스레드가 애그리게이트 사용이 끝날 때까지 다른 스레드가 해당 애그리게이트를 수정하지 못하게 막는 방식
- 스레드 1이 먼저 접근하는 경우 스레드 2는 스레드 1이 수정이 완료될때까지 블로킹된다
- 선점 잠금은 보통 DBMS가 제공하는 행단위 잠금을 사용해서 구현한다

<br>

# 선점 잠금과 교착상태

- 잠금 순서에 따라서 `교착 상태(데드락)`이 발생하지 않도록 주의해야한다
- 선점 감금에 따른 교착 상태는 상대적으로 사용자 수가 많을 때 발생할 가능성이 높다
- 더 많은 스레드가 교착 상태에 빠질수록 시스템은 사무것도 할 수 없는 상태가 된다
- 이런 문제를 대비하기 위해서는 잠금을 구할 떄 `최대 대기 시간`을 지정해야한다
