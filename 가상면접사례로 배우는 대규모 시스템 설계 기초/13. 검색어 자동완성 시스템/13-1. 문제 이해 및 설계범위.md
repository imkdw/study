# 요구사항

### 빠른 응답 속도

- 유저가 검색어를 입력하면, 검색어에 대한 자동완성도 빠르게 표시되어야함
- 페이스북 문서를 보면 100ms 이내에 표시되어야 한다고 되어있음

<br>

### 연관성

- 자동완성되어 출력되는 검색어는 사용자가 입력한 단어와 연관된 것이어야함

<br>

### 정렬

- 시스템의 계산 결과는 인기도 등의 순위 모델에 의해서 정렬되어야함

<br>

### 규모 확장성

- 시스템은 많은 트래픽을 감당할 수 있도록 확장이 가능해야함

<br>

### 고가용성

- 시스템의 일부에 장애가 발생하거나, 느려지거나, 예상치못한 네트워크 문제가 생겨도 시스템은 계속 동작해야함

<br>

# 규모 추정

- DAU는 1천만명(10,000,000)으로 가정
- 평균적으로 한명의 사용자는 매일 10건의 검색을 사용한다고 가정함
- 검색시 평균 20바이트에 데이터를 입력함
  - ASCII를 사용한다고 가정하고, 1문자 = 1바이트로 계산
  - 질의문은 평균적으로 4개의 단어로 이루어진다고 가정, 각 단어는 평균 5글자로 이루어짐
  - 질의당 평균 4 \* 5 = 20 바이트
- 검색창에 글자를 입력할 때 마다 클라이언트는 API를 호출함
  - dinner 문구를 입력하면 총 6번 API 호출이 발생함
- 대략 초당 `1천만유저 * 10 / 일 * 20자 / 24시간 / 3600초 = 24000건`의 쿼리 발생
- 최대 24000 \* 2 = 48000의 QPS
- 질의 중 20% 정도는 신규 검색어로 가정, 대략 0.4GB 정도
  - 1천만유저 _ 10질의 / 일 _ 20 \* 20% = 0.4GB
