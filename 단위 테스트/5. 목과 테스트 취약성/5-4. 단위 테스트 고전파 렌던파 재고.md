# 런던파

- 불변 의존성을 제외한 모든 의존성에 목 사용을 권장
- 시스템 내 통신과 시스템 간 통신을 구분하지 않음
- 이렇게 목을 무분별하게 사용되면 종종 구현 세부 사항에 결합되어 테스트에 리팩터링 내성이 없게됨
- 리팩터링 내성이 저하되면 테스트는 가치가 없어짐

<br>

# 고전파

- 테스트 간 공유하는 의존성(디비, 메세지버스 등)만 교체하자고 하므로 이 문제에 훨씬 유리함
- 하지만 고전파 역시도 시스템 간 통신에 대한 처리에 이상적이지는 않음
- 런던파 만큼은 아니지만, 고전파도 목 사용을 지나치게 장려하는편

<br>

# 모든 프로세스 외부 의존성을 목으로 해야하는건 아니다

- 고전파는 공유 의존성을 피할것을 권고함
- 테스트가 실행 컨텍스트를 서로 방해하고 결국 병렬 처리가 불가능해짐
- 테스트를 병렬적, 순차적 또는 임의의 순서로 실행할 수 있는걸 테스트 격리라고 부름
- 일반적으로 이러한 의존성을 테스트 대역, 즉 목과 스텁으로 교체하는것임

<br>

### 어떨떄 가능할까

- 만약 프로세스 외부 의존성이 앱을 통해서만 접근이 가능하다면, 이러한 의존성과의 통신은 시스템에서 식별할 수 있는 동작이 아님
- 실제로 외부에서 관찰할 수 없는 프로세스 외부 의존성은 앱의 일부로 작용함
- 예를 들어 디비의 경우 앱에서만 사용되는 디비로 어떤 외부 시스템도 이 디비에 접근이 불가능함
- 완전히 통제권을 가진 프로세스 외부 의존성에 목을 사용하게되면 깨지기 쉬운 테스트로 이어진다
  - 디비와 앱은 하나의 시스템으로 취급해야한다

<br>

### 목을 사용한 동작 검증

- 중요한 것은 클라이언트 목표로 거슬러 올라갈 수 있는 동작이다
- 클라이언트에게 중요한것은 도움뿐이다
- 목은 앱의 경계를 넘나드는 상호 작용을 검증할 때와 이러한 상호 작용의 사이드 이펙트가 외부 환경에서 보일 때만 동작과 관련이 있다
