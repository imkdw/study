# 고전파와 런던파의 비교

- 단위 테스트 정의에서 격리 문제를 어떻게 다루는지에 따라 차이가 존재한다
- 목을 사용하는 런던파의 경우는 고전파 테스트보다 불안정한 경향이 존재한다

<br>

# 런던파 접근 방식의 이점

- 테스트가 세밀해서 한 번에 한 클래스만 확인함, 즉 입자성이 좋음
- 의존성 그래프가 커져도 테스트가 쉽다. 모든 협력자는 테스트 대역으로 대체되어 테스트 작성시 걱정할 필요가 없다
- 클래스의 협력자가 없으면 테스트 대상 클래스 외 다른 것을 의심할 여지가 없어서 어떤 기능이 실패했는지 확실히 파악이 가능하다

<br>

# 한 번에 한 클래스만 테스트하기

- OOP를 다루는 개발자는 보통 클래스를 모든 코드베이스의 기초에 위치한 원자 빌딩 블록으로 간주함
- 이로 인해서 자연스럽게 클래스를 테스트에서 검증할 원자 단위로 취급하는데, 이는 오해의 소지가 있음
- 테스트는 코드의 단위를 검증해서는 안되고 동작의 단위 즉 문제 영역에 의미가 있는것을 검증해야한다
- 테스트는 해결하는 데 도움이 되는 문제에 대한 이야기를 들려줘야하며 일반 사람들에게 응집도가 높고 의미가 있어야함

<br>

# 상호 연결된 클래스의 큰 그래프를 단위 테스트하기

- 런던파의 방법처럼 협력자를 목으로 대체하면 복잡한 의존성 그래프를 가진 동작도 쉽게 테스트가 가능함
- 하지만 협력자를 모킹하는것 보다는 먼저 이러한 의존성 그래프를 갖이 않는데 집중해야한다
- 일반적으로 그래프가 커진 것은 코드 설계 문제의 결과다

<br>

# 버그 위치 정확히 찾아내기

- 런던파의 경우는 시스템에 버그를 생기면 SUT에 버그가 포함된 테스트만 실패한다
- 반대로 고전파의 경우는 오작동 하는 클래스를 참조하는 클라이언트를 대상으로 하는 테스트도 실패할수도 있다
  - 하나의 버그가 전체 시스템에 걸쳐서 테스트 실패를 야기하는 파급 효과를 초대한다
- 하지만 정기적으로 CI 과정에서 테스트를 실행하면 버그위치를 금방 찾을 수 있고 오히려 가치가 있음

<br>

# 고전파 런던파 사이의 다른점

- 대표적으로 `TDD를 통한 시스템 설계 방식`과 `과도한 명세`에 차이점이 존재함

<br>

### TDD를 통한 시스템 설계 방식

#### 런던 스타일

- 하향식 TDD로 이어지고 시스템에 대한 기대치를 설정하는 상위 레벨 테스트부터 시작함
- 모든 클래스를 클래스를 구현할 때 까지 클래스 그래프를 다져나감
- 테스트할 떄 SUT의 모든 협력자를 차단해서 해당 협력자의 구현을 나중으로 미룰수있음

<br>

#### 고전 스타일

- 테스트에서 의존성에 대한 실제 객체를 다뤄야 하므로 지침을 똑같이 두지 않음
- 일반적으로 상향식으로 TDD를 진행함
- 도메인 모델을 시작으로 최종 사용자가 SW를 사용할 수 있을 때까지 계층을 그 위에 더 두는 방식임
