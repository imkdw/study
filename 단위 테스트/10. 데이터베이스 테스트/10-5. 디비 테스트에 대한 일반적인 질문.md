# 읽기 테스트를 해야할까?

### 쓰기 테스트의 중요성

- 쓰기 테스트는 매우 철저하게 해야한다. 왜냐하면 위험성이 높기 때문임
- 쓰기 작업이 손상되면 데이터가 손상되어 디비뿐만 아니라 외부 앱에도 영향을 미칠 수 있음
- 쓰기를 다루는 테스트는 이러한 실수에 대비한 보호책이 되므로 매우 가치가 있음

<br>

### 읽기 테스트는?

- 읽기 작업에는 보통 해로운 문제가 없ㅇ므로, 테스트 임계치는 쓰기 테스트 임계치보다 높아야한다
- 가장 복잡하거나 중요한 읽기 작업만 테스트하고 나머지는 무시하는게 좋음
- 읽기에는 추상화 계층이 거의 없이 때문에 단위 테스트가 아무런 소용도 없다
- 읽기를 테스트하는 경우에는 실제 디비와 결합해서 통합테스트를 하는게 좋다

<br>

# 레포지토리를 테스트 해야될까?

- 레포지토리는 디비 위에 유용한 추상화 기능을 제공해준다
- 레포지토리가 도메인 객체를 어떻게 디비에 매핑하는지 테스트하는게 유익할지도 모른다
- 하지만 이 기능에는 실수가 상당히 있을 여지가 있다
- 테스트 유지비가 높고 회귀 방지가 떨어져서 테스트 스위트에 손실이 발생한다

<br>

### 높은 유지비

- 복잡도가 거의 존재하지 않고, 프로세스 외부 의존성인 디비와 통신하게된다
- 프로세스 외부 의존성이 존재하면 테스트의 유지비가 증가하는데 레포지토리 테스트와 일반 통합 테스트는 그 부담 정도가 비슷하다
- 이러한 테스트가 그 대가로 유익한것도 비슷한지 보자면 그렇지는 않다

<br>

### 낮은 회귀 방지

- 레포지토리는 그렇게 복잡하지 않고 회귀 방지에서 일반적인 통합 테스트가 주는 이점과 겹친다
- 레포지토리에 대한 테스트는 가치를 충분히 더 주지 못한다
- 가능하면 레포지토리는 직접 테스트하지 말고, 포괄적인 통합 테스트 스위트의 일부로 취급하는게 좋다
