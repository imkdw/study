# 도메인 지식 찾아내기

- 효과적인 소프트웨어 솔루션 설계를 위해서는 적어도 기본적인 비즈니스 도메인 지식이 있어야함
- 도메인 전문가를 이해하고 드릉이 쓰는 동일한 비즈니스 용어를 사용하는게 중요함
- `멘탈 모델`을 모방해야 하는데, 이해도가 없이 개발한다면 단순하게 솔루션은 요구사항을 소스코드로 `번역`한것에 불과하다
- 문제를 해결하려면 문제를 이해하는게 중요하며, 효과적인 지식 공유에는 효과적인 커뮤니케이션이 필요하다

<br>

# 커뮤니케이션

- 거의 모든 소프트웨어 프로젝트에는 도메인 전문가, 엔지니어, 디자이너 등 다양한 역할의 이해관계자의 협업이 필요하다
- 프로젝트와 연관된 모든 것에 대한 합의와 일치는 프로젝트의 성공에 필수적이다
- 전형적인 소프트웨어 개발 생애주기에서 도메인 지식은 `분석 모델`로 알려진 엔지니어 친화적인 형태로 `변환` 된다
- 다만 분석 모델의 경우는 시스템 요구사항을 설명한것에 지나지 않는데, 이 때 도메인 전문가가 개발자에게 더 나은 방법을 제안하는데 이게 바로 `유비쿼터스 언어`다

<br>

# 유비쿼터스 언어

- 유비쿼터스 언어를 사용하는건 도메인 주도 설계의 초석으로 참가자들이 소통하기 위해 변환에 의존하지 말고 같은 언어를 사용하는것이다
- 비즈니스 도메인을 설명하기 위한 단일화된 언어 쳬게를 세우기 위해서 사용하는 언어
- 모든 이해관계자들이 동일한 유비쿼터스 언어를 사용해아 한다

<br>

# 비즈니스 언어

- 유비쿼터스 언어는 도메인 전문가의 이해와 비즈니스 도메인에 대한 멘탈 모델을 쉽게 이해할 수 있는 관점으로 표현하는걸 목표로함
- 즉 유비쿼터스 언어는 비즈니스 언어라고 이해하면됨

<br>

### 시나리오

- 기술적인 언어는 도메인 전문가에게는 이해가 힘들수도 있다
- 개발자가 기술적이고 솔루션 중심의 관점에서만 비즈니스를 바라본다면 완벽하게 이해할 수 없거나 로직 이해가 힘들다

#### 유비쿼터스 언어로 작성

- 광고 캠페인은 다양한 창의적인 자료를 전시할 수 있다
- 캠페인은 최소한 하나의 광고 할당이 활성되어야 게시된다

<br>

#### 기술적인 언어로 작성

- 광고 아이프레임은 HTML을 표현한다
- 캠페인은 활성-할당 테이블에 하나의 연관 레코드가 존재해야한다

<br>

### 일관성

- 유비쿼터스 언어는 반드시 정확하고 일관성이 존재해야한다
- 가정할 필요가 없으며 비즈니스 도메인의 로직을 명료하게 표현해야한다
- 모호성은 커뮤니케이션을 방해하므로 유비쿼터스 언어의 용어는 하나의 의미를 가져야한다

<br>

### 모호한 용어

- 어떤 비즈니스 도메인에서는 `정책`이라는 용어는 규체나 보험 계약과 같은 다양한 의미를 가진다
- 소프트웨어는 모호성에 약하므로 `정책`이라는 개체를 코드로 모델링하기 어려울 수 있다
- 유비쿼터스 언어의 용어는 단일 의미를 가져아하기 때문에 `규체 규칙`, `보험 계약`등으로 분리해야한다

<br>

### 동의어

- 사용자라는 뜻은 과리자, 방문자, 계정 등 다양한 언어를 뜻하는 동의어다
- 가능하면 특정 컨텍스트 안에서 각각의 용어를 사용하는게 바람직하다

<br>

# 비즈니스 도메인 모델

### 모델이란?

- 모델은 실세계의 복제가 아닌 실제 시스템을 이해하는데 도움을 주는 인간의 창조물이다
- 사물이나 현상에서 의도한 관점만 강조하고 다른 측면은 무시하며 간략하게 표현한 것이다

<br>

### 효과적인 모델링

- 효과적인 모델에는 목적이 있고, 그 목적을 달성하는데 필요한 세부사항만 포함한다
- 유용한 모델은 실세계의 복사본이 아니라 문제를 해결하려는 의도가 있고, 목적에 필요한 정보만 제공해야한다

<br>

### 비즈니스 도메인 모델링

- 유비쿼터스 언어를 발전시키는 것은 사실상 비즈니스 도메인 모델을 구축하는 셈이다
- 모델은 도메인과 관련된 `엔티티`와 그것의 행동, 인과 관계, 불변성 등을 반영해야한다
- 엔지니어링 팀과 도메인 전문가의 효과적인 커뮤니케이션을 필수이고 도메인이 복잡할수록 더 중요해진다

<br>

### 지속적인 노력

- 유비쿼터스 언어를 정형화하기 위해서는 도메인 전문가화 상호작용이 필요하다
- 도메인 전문가와의 상호작용만이 비즈니스 도메인에 대한 부정확함, 잘못된 가정 등 오류를 발견할 수 있다
- 유비쿼터스 언어는 짠 하고 완성하는게 아닌 지속해서 검증하고 발전시켜야한다

<br>

### 도구

- 위키의 경우는 유비쿼터스 언어를 수집하고 관리하는 `용어집`으로 사용이 가능함
- 모든 관계자들이 용어집을 유지보수하는게 중요하고, 언어가 수정되면 모든 팀원이 수정이 가능하게 독려해야함
- 하지만 이러한 용어집은 이름, 과정, 역할 등 `명사`에만 효과적인 한계가 존재한다
- 또한 제일 중요한건 개인과의 상호작용이며 이는 프로세스나 도구보다 더 중요하다

<br>

### 거킨 테스트

- 거킨 테스트로 작성된 테스트는 유비쿼터스 언어를 포착하기에 좋은 언어이다
- 도메인 전문가는 테스트를 읽고 시스템의 기대 행동 검증이 가능하다
- 하지만 테스트를 유지보수하는건 힘들지만 복잡한 비즈니스 도메인인 경우에는 확실한 가치가 있다

<br>

#### 거킨 테스트 예시

```
시나리오 : 에이전트에게 새로운 지원 케이스에 대해 알림
  Given: 철수는 다음 내용을 담은 새로운 지원 케이스를 제출
  """
  나는 AWS Route53을 설정하는데 도움이 필요하다
  """
  When: 티켓이 울프한테 할당된다
  Then: 에이전트는 새로운 티켓에 대해서 알림을 받게된다
```

<br>

### 도전과제

- 이론상으로 유비쿼터스 언어를 발전시키는건 쉬워보이지만 그렇지 않음
- 도메인 지식을 수집하는 신뢰할 만한 유일한 방법은 도메인 전문가와 대화하는 것임
- 하지만 대부분의 경우 가장 중요한 지식음 암묵지고 문서화나 코드로 작성되지 않는 경우가 대반사임
- 이미 기존에 사용중인 언어를 바꾸기엔 쉽지 않은데 코드나 문서처럼 제어하기 쉬운 부분부터 올바른 언어를 써야한다
- 또한 적어도 비즈니스 엔티티의 이름은 영어 명사로 쓰는게 좋은데. 이러면 코드에서도 동일한 용어 사용이 가능함
