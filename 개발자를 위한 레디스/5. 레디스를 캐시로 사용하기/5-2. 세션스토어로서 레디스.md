# 세션?

- 서비스를 사용하는 클라이언트의 상태정보
  - 현재 로그인된 클라이언트, 어떤 활동을 하는지 등 저장함
  - ex) 장바구니정보, 최근 . 본아이템 등

<br/>

# 세션스토어가 왜 필요할까

- 최근 부하분산을 위한 여러대의 인스턴스를 구동하는 아키텍쳐가 많이 사용됨
- 단일 서버에서 세션스토어를 관리한다면 여러개의 서버에서 동일한 세션 관리가 불가능함
- DB를 통한 세션관리도 가능하지만 데이터를 처리하는 속도가 느리고 부하가 높음
- 레디스의 hash 자료구조는 세션데이터를 저장하기에 좋음

```
127.0.0.1:6379> hmset usersession:1 name dongwoo ip 1:1:1:1 hits 1
OK
127.0.0.1:6379> hincryby usersession:1 hits 1
(integer) 2
127.0.0.1:6379> hgetall usersession:1
1) "name"
2) "dongwoo"
3) "ip"
4) "1:1:1:1"
5) "hits"
6) "2"
```

<br>

# 캐시와 세션의 차이

- 둘은 서로 비슷해 보이지만 데이터를 읽고 쓰는 패턴에 있어서 차이점이 존재함
- 캐시의 경우 DB의 서브셋으로 동작한다
- 세션의 경우 DB에는 없고 레디스에서 단독으로 동작한다
  - 유저가 로그아웃 할때 해당 데이터를 디비에 저장할지 등 정책에 따라 다르다
  - 또한 데이터가 손실될수도 있으니 더 신중한 운영이 필요하다
