# string

- 레디스에서 데이터를 저장할 수 있는 가장 간단한 자료구조
- 최대 512MB의 문자열 데이터를 저장할 수 있음
- binary-safe하기 때문에 이미지 바이트값, HTTP 응답값 등 저장 가능

```
127.0.0.1:6379> set hello world
OK
127.0.0.1:6379> get hello
"world"
127.0.0.1:6379>
```

<br/>

### NX 옵션

`NX 옵션`을 사용하면 지정한 키가 없을때만 새로운 키를 저장

```
127.0.0.1:6379> set hello world2 NX
(nil)
127.0.0.1:6379> get hello
"world"
127.0.0.1:6379>
```

<br/>

### XX 옵션

`XX 옵션`을 사용하면 지정한 키가 존재할때만 기존 값에다가 덮어씌움

```
127.0.0.1:6379> set hello1 world XX
(nil)
127.0.0.1:6379> get hello1
(nil)
127.0.0.1:6379>
```

<br/>

### 숫자 저장

- 숫자 저장도 가능하고 `INCR, INCRBY`, `DECR, DECRBY` 같은 명령어로 원자적으로 조작도 가능
- 원자적이라는것은 여러개의 클라이언트가 경쟁상태를 발생시킬일이 없음을 의미

```
127.0.0.1:6379> set counter 100
OK
127.0.0.1:6379> get counter
"100"
127.0.0.1:6379> INCR counter
(integer) 101
127.0.0.1:6379> INCRBY counter 100
(integer) 201
127.0.0.1:6379> DECR counter
(integer) 200
127.0.0.1:6379> DECRBY counter 20
(integer) 180
127.0.0.1:6379>
```

<br/>

### 여러개 한번에 제어하기

`MSET`, `MGET`으로 한번에 여러개의 키를 조작할 수 있음

```
127.0.0.1:6379> MSET a 10 b 20 c 30
OK
127.0.0.1:6379> MGET a b c
1) "10"
2) "20"
3) "30"
127.0.0.1:6379>
```

<br/>

# list

- list는 순서를 가지는 문자열로 최대 42억개의 아이템 저장이 가능함
- 인덱스를 이용해서 접근이 가능하고, 서비스에서 보통 스택이나 큐로 사용됨

### LPUSH, RPUSH

- LPUSH : list의 왼쪽에 데이터를 추가
- RPUSH : list의 오른쪽에 데이터를 추가

```
127.0.0.1:6379> LPUSH myList E
(integer) 1
127.0.0.1:6379> RPUSH myList B
(integer) 2
127.0.0.1:6379> LPUSH myList A C
(integer) 4
127.0.0.1:6379> RPUSH myList D O
(integer) 6
127.0.0.1:6379> LRANGE myList 0 -1
1) "C"
2) "A"
3) "E"
4) "B"
5) "D"
6) "O"
127.0.0.1:6379> LRANGE myList 0 2
1) "C"
2) "A"
3) "E"
127.0.0.1:6379>
```

<br/>

### LPOP

왼쪽에서 데이터를 삭제하고 해당 데이터를 반환

```
127.0.0.1:6379> LRANGE myList 0 -1
1) "B"
2) "D"
3) "O"
127.0.0.1:6379> LPOP myList
"B"
127.0.0.1:6379> LRANGE myList 0 -1
1) "D"
2) "O"
127.0.0.1:6379>
```

<br/>

### LTRIM

- 지정한 범위를 제외한 모든 아이템을 삭제함
- LPOP 처럼 삭제한 데이터를 반환하진 않음

```
127.0.0.1:6379> LRANGE myList 0 -1
1) "Z"
2) "O"
3) "Y"
4) "W"
5) "B"
6) "A"
7) "D"
8) "O"
127.0.0.1:6379> LTRIM myList 0 2
OK
127.0.0.1:6379> LRANGE myList 0 -1
1) "Z"
2) "O"
3) "Y"
127.0.0.1:6379>
```

<br/>

### LPUSH + LTRIM 커맨드로 로그 관리

- 최대 1000개의 로그가 저장된다고 가정

```
127.0.0.1:6379> LPUSH log data
(integer) 1
127.0.0.1:6379> LTRIM log 0 999
OK
127.0.0.1:6379>
```

<br/>
