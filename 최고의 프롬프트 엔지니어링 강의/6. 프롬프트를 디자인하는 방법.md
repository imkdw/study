# 프롬프트 디자인의 3가지 핵심 요소
### 답변을 위해서 필요한 컨텍스트 제공하기
- 충분한 배경 정보를 제공해서 모델이 질문의 맥락을 이해하고 더 정확하게 답변할 수 있게 만든다
- 이는 사람에게 물어볼때도 사전에 충분한 정보를 전달하고 물어보는것과 같은 의미다

<br>

### 원하는 결과 추출을 위한 프롬프트 작성
- LLM으로 부터 얻고자 하는 정보나 작업의 몫표가 무엇인지를 명확하게설정하고 그에 맞는 질문이나 요청을 구성함
- 식당에서 요리를 할 때 항상 원하는 요리가 나올 수 있도록 레시피를 만드는 것과 비슷함

<br>

### 결과물의 형식 지정
- 예를 들면 리스트, 요약문, 특정 양식의 답변 등 원하는 정보의 형태를 명시함
- 이로써 LLM이 제공하는 출력물이 사용자의 요구사항을 만족시킬 수 있게함
  
<br>

### 프롬프트 엔지니어링의 세분화 5단계
- 프롬프트 결과 설정 : 원하는 답변이나 결과 유형을 명확히 정의, 최종적으로 얻고자 하는 정보의 종류화 형태를 결정함
- 프롬프트 평가 설계 : 프롬프트의 효과를 어떻게 평가할지에 대한 기준을 마련함. 결국 최종으론 만든 프롬프트를 반복적으로 사용해서 업무를 자동화해야함(제일중요한 단계)
- 그라운딩 설계 및 평가 : AI가 답변 생성시 신뢰할 수 있는 정보나 데이터에 기반하여 정확성과 연관성을 확보하는 과정. 기초 데이터나 사실을 정리함
- 프롬프트 디자인 : 위에서 정의한 목표와 평가 기준에 따라서 실제 프롬프트 작성, 창의성과 실험적인 접근이 필요하고 최적의 프롬프트 구조를 찾아야함
- 모니터링 및 개선 : 실ㅈ 업무에 반영하고 지속적으로 성능 모니터링 및 개선이 필요함. 유저의 피드백 반영 및 업데이트하여 최신 상태를 유지하는 과정이 포함됨

<br>

# 프롬프트 디자인 프레임워크
### 역할(Role) 정의
- AI의 페르소나 또는 역할을 정의함
- 실제 상황이나 문제에 대해서 어떤 태도나 전문성을 가지고 적합하게 응대해야 하는지 설정함

```
**당신은 법률 전문가 입니다.** 법률 관련 질문에 답하십시오
**당신은 신문 기자입니다.** 주요 뉴스 이벤트에 대한 보고를 작성하세요
```

<br>

### 대상(Audience) 명시
- 누구에제 정보를 제공하고 있는지, 즉 응답의 대상(Audience)을 명시함
- 대상을 고려해서 프롬프트를 설계하면 응답 내용이 그 대상의 필요나 수준에 맞게 조정될 수 있음

```
**초등학생에게** 태양계의 핵성에 대해서 설명해주세요
**데이터 과학자에게** 최신 머신러닝 알고리즘의 동향에 대해 설명해주세요
```

<br>

### 지식과 정보 제공
- 질문과 관련해서 참고할만한 지식과 정보를 DB나 검색 엔진 등에서 가져와서 삽입함
- 정확하고 신뢰할 수 있는 정보를 제공하거나 AI의 지식 범위를 설정하는건 할루시네이션을 줄이고 더 정확한 응답을 받으 ㄹ수 있음

```
**위키피디아의 내용에 따라** 나폴레옹에 대해서 설명해주세요

오늘 발표된 정부의 새로운 경제 정책은 다음과 같습니다
1. ~~~
2. ~~~
발표된 내용을 초등학생에에 이야하기하듯이 설명해주세요
```

<br>

### 수행해야 할 작업 및 목표 명시
- 수행해야되는 특정 작업이나 목표를 설정함. 작업을 명확히 해야 AI가 목표를 이해하고 정확한 결과 제공이 가능함
- 작업은 여러 단계로 쪼개서 최대한 상세하게 작성하는게 좋음

```
**환경 보호를 위한 설득력 있는 연설문을** 만들어 주세요
**마케팅 전략을 개선하기 위한 제안을** 제시해주세요

# 아래는 구체적인 하위 단계를 포함해서 상세하게 작성한 예시
500 단어로 자기 소개서를 작성해주세요
  - 자기 소개서를 작성해주세요
  - 서론 본론 결론으로 나누어서 작성해주세요
  - 경험 성과 개인적 성장 등 구체적 사례를 들어 설명력을 높여주세요
```

<br>

### 정책 및 규칙, 스타일 가이드, 제약 사항 설정
```
**성격의 긍적적인 측면만을 강조**하며 자기 소개서를 작성해주세요
**건설적인 피드백만을 제공**하면서 에세이를 평가해주세요
```

```
**유머러스한 톤**으로 생일 축하 메세지를 작성해주세요
**열정적이고 설득력 있는 톤**으로 제품 소개글을 작성해주세요
```

```
**한 페이지 내**로 비즈니스 제안을 작성해주세요
**140자 이내**로 트윗을 작성해주세요
```

<br>

### 형식 및 구조 설정
- 응답이 따라햐 하는 특정 형식이나 구조를 설정함
- 이는 목록이나 단락 또는 대화형이 될수도 있음

```
**MLA 스타일로** 참고 문헌 목록을 만들어쥬ㅜ세요
**JSON 형식으로** 결과를 출력해주세요
```

<br>

### 구체적인 예시 제공
- 원하는 응답 형식이나 내용을 구체적으로 보여주는 예시를 제공함
- AI에게 분명한 지침을 제공해서 원하는 방향으로 응답을 유도할 수 있음

```
다음의 예시를 참고해서 응답하세요
  User: I Love You.
  AssistantL: 나는 당신을 사랑합니다.

다음과 같은 형식으로 출력해주세요 
  {"name": "John Doe", "age": 30, "city": "New York"}
```

<br>

# 프롬프팅 테크닉 TOP 8
### 예시 제공
- 가장 기본이 되는 기법으로 사전에 예제를 제공해서 이를 참고하고 답변하도록 해 더 나은 성능을 발휘하는 기술
- 제로샷, 원샷, 퓨샷이 존재함
- 번역 같은 테스크는 예제를 제공하는것과 제공하지 않는것의 성능차이가 크지 않지만 번역 스타일을 변경하는 등의 경우는 퓨샷을 사용하면 효과적임


#### 퓨샷의 예시
- 퓨샷은 파라미터 크기가 큰 LLM에서 훨씬 성능이 좋게나옴
- 하지만 정확한 답을 말해야 하는 산술 추론 문제에는 적합하지 않음
- 랜덤하게 분포되어 있는 레이블에서 가장 확률이 높은 답변을 골라내는 일에 적합함

```
고양이: 동물
오렌지: 과일
토마토: 식물
(Input)비둘기 -> (Output)조류
```

#### 퓨샷의 안좋은 예시
- 프롬프트를 모두 동일하게 만들고 요청하면 제대로된 결과가 나오지 않음
- 따라서 최대한 다양한 종류로 제공할 필요가 있음

```
고양이: 동물
호랑이: 동물
조랑말: 동물
(Input) 비둘기: (Output) 동물
```

<br>

### 생각사슬(CoT)
- 거의 모든 프롬프팅 테크닉의 기초가 되는 기법, LLM이 문제의 이유나 추론 과정에 대해서 직접 설명하도록 만듬
- 중간에 추론단계를 거쳐서 복잡한 사고가 필요한 작업에 정확도를 향상시킬 수 있음
- CoT 방식의 핵심은 생각의 과정을 먼저 제시해준다는 것임

```
Q. 철수는 테니스공 5개 갖고있고 공 담은 통을 2개 더 샀음, 각 통에는 3개가 있는데 이제 몇개를 가지고있는가
A. 철수는 처음에 5개를 가지고 있었고 통 하나에 테니스공 3개씩 들어있는 통을 2개 샀으니 총 6개의 테니스공이 추가됨, 5 + 6 = 11, 즉 11개를 가지고있음
```


<br>

### 자기 일관성
- CoT보다 AI가 더 정확하고 신뢰할 수 있는 답변은 제공하도록 설계된 기법
- 여러가지 추론 경로를 고려하고 가장 일관되게 나온 답을 선택함, 사람에게 각자 해결방안 생각하고 가장 반복적으로 나온 답을 고르는거랑 유사함
- 즉 중요한것은 다양성으로 하나의 문제에 대해서 여러가지 방식으로 접근하고 해결 해보는것임

<br>

### 샘플링 투표
- 자기 일관성과 개념적으로 유사하지만 몇 가지 차이점이 존재함
- 자기 일관성은 CoT 기반의 추론 작업 전용 방법이지만 샘플링 투표는 더 일반화되고 단순화됨 개념임
- 핵심 아이디어는 여러개의 LLM 에이전트를 사용하는것임
- 동일한 입력으로 LLM을 반복적으로 실행해서 여러개의 출력 샘플을 생성하는데 이 때 다수결로 가장 일관성있는 출력을 최종 답변으로 선택함

<br>

### 선택 추론
- 복잡한 문제를 해결하기 위해서 여러개의 추론 단계를 연결하는 기술
- 선택과 추론 사이를 번갈아가면서 해석 가능한 원인-결과의 추론 단계를 생성해서 최종 답변을 이끌어냄
- 컨텍스트에서 답할수 있는 정보를 먼저 선택하고 그 정보를 기반으로 답변하도록 만든다고 생각하면됨

<br>

### 최소에서 최대로
- 하나의 문제를 더 작은 여러 개의 하위 작업으로 분할하는 기법
- 